<html xmlns:th="http://www.thymeleaf.org">
<style th:fragment="style">
</style>
<script th:fragment="script">
        $( document ).ready(function() {
            console.log('version.0.0.1');
            init();
        });

        function init() {
            var codes = {
                "Boolean":[
                    {id:"true",name:"true"},
                    {id:"false",name:"false"}
                ]
            };

            setCodes(codes);

            getList();
        }

        function setCodes(codes) {
            setCodeBox("useAuthValidation", codes["Boolean"]);
            setCodeBox("useProfile", codes["Boolean"]);
            setCodeBox("useLogo", codes["Boolean"]);
        }

        function getList() {
            httpClient.get(`/console/api/layout`, {},
                function(response){
                    if(!isEmpty(response)) {
                        setContentData(response[0]);
                    }
                },
                function(error){
                    alert('error');
                }
            );
        }

        function isEmpty(v) {
            return (v == undefined || v == null || v == '');
        }

        function save() {
            let id = $("#id").val();

            if(isEmpty(id))
                insertContent();
            else
                updateContent(id);
        }

        function insertContent() {
            httpClient.post(`/console/api/layout`,{},getContent(),
                function(response){
                    alert("저장완료되었습니다.");
                    getList();
                },
                function(error){
                    alert('error');
                }
            );
        }

        function updateContent(id) {
          httpClient.put(`/console/api/layout/${id}`, {}, getContent(),
              function(response){
                  alert("저장완료되었습니다.");
                  getList();
              },
              function(error){
                  alert('error');
              }
          );
        }

        function deleteContent() {
          let id = $("#id").val();

          httpClient.delete(`/console/api/layout/${id}`, {},
              function(response){
                  alert("삭제 처리 완료되었습니다.");
                  getList();
              },
              function(error){
                  alert('error');
              }
          );
        }

        function setContentData(response) {
            setContent(response);
        }

        function getContent() {
            return {
                id: $("#id").val(),
                useAuthValidation: $("#useAuthValidation").val(),
                useProfile: $("#useProfile").val(),
                useLogo: $("#useLogo").val(),
                logoText: $("#logoText").val(),
                logoBackgroundColor: $("#logoBackgroundColor").val(),
                logoLink: $("#logoLink").val(),
                logoImg: $("#logoImg").val(),
                layoutTitle: $("#layoutTitle").val()
            }
        }

        function setContent(params) {
            $("#id").val(params.id);
            $("#useAuthValidation").val(String(params.useAuthValidation));
            $("#useProfile").val(String(params.useProfile));
            $("#useLogo").val(String(params.useLogo));
            $("#logoText").val(params.logoText);
            $("#logoBackgroundColor").val(params.logoBackgroundColor);
            $("#logoLink").val(params.logoLink);
            $("#logoImg").val(params.logoImg);
            $("#layoutTitle").val(params.layoutTitle);
          }
    </script>
<div th:fragment="view">
    <div class="row">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Layout</h3>
                        <div class="card-tools">
                            <mf-action-button id="save" actionName="save()" icon="fas fa-save"></mf-action-button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-1">
                                <mf-text-input id="id" label="ID" enable="false" ></mf-text-input>
                            </div>
                            <div class="col-md-3">
                                <mf-text-input id="layoutTitle" label="레이아웃 title" enable="true"></mf-text-input>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <mf-select id="useAuthValidation" label="인증사용" enable="true" useFirstItem="true" firstItemLabel="" firstItemValue=""></mf-select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <mf-select id="useProfile" label="프로필사용" enable="true" useFirstItem="true" firstItemLabel="" firstItemValue=""></mf-select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <mf-select id="useLogo" label="로고사용" enable="true" useFirstItem="true" firstItemLabel="" firstItemValue=""></mf-select>
                            </div>
                            <div class="col-md-2">
                                <mf-text-input id="logoBackgroundColor" label="로고 색상" enable="true"></mf-text-input>
                            </div>
                            <div class="col-md-3">
                                <mf-text-input id="logoLink" label="로고 link" enable="true"></mf-text-input>
                            </div>
                            <div class="col-md-3">
                                <mf-text-input id="logoImg" label="로고 img" enable="true"></mf-text-input>
                            </div>
                            <div class="col-md-2">
                                <mf-text-input id="logoText" label="로그 텍스트" enable="true"></mf-text-input>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</html>